<% if notice.present? %>
  <div class="alert alert-success alert-dismissible fade show modern-alert" role="alert">
    <i class="bi bi-check-circle-fill me-2"></i>
    <%= notice %>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% end %>

<% content_for :title, "Abstrakte Abschlussarbeiten" %>

<div id="search_results" class="text-center mb-4">
</div>

<div class="thesis-header text-center mb-5">
  <h1 class="display-4 fw-bold text-primary mb-3">
    <i class="bi bi-lightbulb-fill me-3"></i>Abstrakte Abschlussarbeiten
  </h1>
  <p class="lead text-muted mb-4">Verwalten Sie die verfügbaren Themen für Abschlussarbeiten</p>
  
  <div class="d-flex justify-content-center">
    <%= link_to new_abstrakte_abschlussarbeit_path, class: "btn btn-success btn-lg px-4 py-2 shadow-sm modern-btn" do %>
      <i class="bi bi-plus-circle-fill me-2"></i>
      Neues Thema erstellen
    <% end %>
  </div>
</div>

<!-- Statistik Cards -->
<div class="stats-row mb-5">
  <div class="container-fluid">
    <div class="row g-4">
      <div class="col-lg-3 col-md-6">
        <div class="stat-card">
          <div class="stat-icon topic-icon">
            <i class="bi bi-lightbulb"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number"><%= @abstrakte_abschlussarbeits.count %></h3>
            <p class="stat-label">Verfügbare Themen</p>
          </div>
        </div>
      </div>
      
      <div class="col-lg-3 col-md-6">
        <div class="stat-card">
          <div class="stat-icon new-icon">
            <i class="bi bi-star-fill"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number"><%= @abstrakte_abschlussarbeits.select { |t| t.created_at > 1.month.ago }.count %></h3>
            <p class="stat-label">Neue Themen</p>
          </div>
        </div>
      </div>
      
      <div class="col-lg-3 col-md-6">
        <div class="stat-card">
          <div class="stat-icon category-icon">
            <i class="bi bi-tags-fill"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number"><%= @abstrakte_abschlussarbeits.distinct.count(:forschungsprojekt) %></h3>
            <p class="stat-label">Kategorien</p>
          </div>
        </div>
      </div>
      
      <div class="col-lg-3 col-md-6">
        <div class="stat-card">
          <div class="stat-icon available-icon">
            <i class="bi bi-check2-circle"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">100%</h3>
            <p class="stat-label">Verfügbar</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Moderne Card-Ansicht -->
<div class="thesis-grid">
  <div class="container-fluid">
    <% if @abstrakte_abschlussarbeits.any? %>
      <div class="row g-4">
        <% @abstrakte_abschlussarbeits.each do |abstrakte_abschlussarbeit| %>
          <div class="col-xl-4 col-lg-6 col-md-6">
            <div class="topic-card">
              <div class="topic-card-header">
                <div class="topic-status available">
                  <i class="bi bi-circle-fill"></i>
                  <span>Verfügbar</span>
                </div>
                <div class="topic-date">
                  <i class="bi bi-calendar3"></i>
                  <%= abstrakte_abschlussarbeit.created_at.strftime("%d.%m.%Y") %>
                </div>
              </div>
              
              <div class="topic-card-body">
                <h5 class="topic-title">
                  <%= link_to abstrakte_abschlussarbeit.thema.presence || "Ohne Titel", abstrakte_abschlussarbeit, 
                      class: "text-decoration-none" %>
                </h5>
                
                <div class="topic-meta">
                  <% if abstrakte_abschlussarbeit.forschungsprojekt.present? %>
                    <div class="meta-item">
                      <i class="bi bi-bookmark-fill"></i>
                      <span><%= abstrakte_abschlussarbeit.forschungsprojekt %></span>
                    </div>
                  <% end %>
                  
                  <div class="meta-item">
                    <i class="bi bi-clock-fill"></i>
                    <span>6 Monate</span>
                  </div>
                </div>
                
                <% if abstrakte_abschlussarbeit.themenskizze.present? %>
                  <p class="topic-description">
                    <%= truncate(abstrakte_abschlussarbeit.themenskizze, length: 150) %>
                  </p>
                <% end %>
              </div>
              
              <div class="topic-card-footer">
                <div class="topic-actions">
                  <%= link_to abstrakte_abschlussarbeit, class: "btn btn-outline-primary btn-sm" do %>
                    <i class="bi bi-eye-fill me-1"></i>Details
                  <% end %>
                  
                  <%= link_to edit_abstrakte_abschlussarbeit_path(abstrakte_abschlussarbeit), 
                      class: "btn btn-outline-secondary btn-sm" do %>
                    <i class="bi bi-pencil-fill me-1"></i>Bearbeiten
                  <% end %>
                </div>
                
                <div class="topic-difficulty">
                  <div class="difficulty-stars">
                    <% 3.times do %>
                      <i class="bi bi-star-fill"></i>
                    <% end %>
                    <% 2.times do %>
                      <i class="bi bi-star"></i>
                    <% end %>
                  </div>
                  <small class="text-muted">Schwierigkeit</small>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="empty-state text-center py-5">
        <div class="empty-icon">
          <i class="bi bi-lightbulb"></i>
        </div>
        <h3 class="empty-title">Keine abstrakten Abschlussarbeiten vorhanden</h3>
        <p class="empty-description">
          Erstellen Sie Ihr erstes Thema, um Studierenden Auswahlmöglichkeiten zu bieten.
        </p>
        <%= link_to new_abstrakte_abschlussarbeit_path, class: "btn btn-primary" do %>
          <i class="bi bi-plus-circle-fill me-2"></i>
          Erstes Thema erstellen
        <% end %>
      </div>
    <% end %>
  </div>
</div>
    </div>

    <div class="d-flex justify-content-center">
      <%= will_paginate @abstrakte_abschlussarbeits, 
          class: 'pagination pagination-sm mb-0' %>
    </div>
    