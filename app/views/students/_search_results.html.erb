<% if defined?(students) && students.present? %>
  <div class="card border-info">
    <div class="card-header bg-info-subtle">
      <h6 class="mb-0 text-info">
        <i class="bi bi-search me-2"></i>
        Suchergebnisse 
        <span class="badge bg-info ms-2"><%= students.count %> Studierende</span>
      </h6>
    </div>
    <div class="card-body">
      <div class="row g-2">
        <% students.each do |student| %>
          <div class="col-md-6 col-lg-4">
            <div class="card border h-100">
              <div class="card-body p-3">
                <h6 class="card-title mb-2 d-flex align-items-center">
                  <div class="avatar-circle bg-info text-white me-2" style="width: 32px; height: 32px; font-size: 0.75rem;">
                    <%= student.vorname.first.upcase rescue 'S' %><%= student.nachname.first.upcase rescue 'T' %>
                  </div>
                  <%= student.vorname %> <%= student.nachname %>
                </h6>
                <div class="text-muted small mb-2">
                  <i class="bi bi-envelope me-1"></i><%= student.email %>
                </div>
                <div class="small mb-3">
                  <strong>Matrikel:</strong> <%= student.matrikelnummer %>
                </div>
                <div class="d-flex gap-1">
                  <%= link_to student_path(student), class: "btn btn-sm btn-outline-primary" do %>
                    <i class="bi bi-eye me-1"></i>Details
                  <% end %>
                  <%= link_to edit_student_path(student), class: "btn btn-sm btn-outline-secondary" do %>
                    <i class="bi bi-pencil me-1"></i>Bearbeiten
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% if defined?(konkrete_abschlussarbeiten) && konkrete_abschlussarbeiten.present? %>
  <div class="card border-success mt-3">
    <div class="card-header bg-success-subtle">
      <h6 class="mb-0 text-success">
        <i class="bi bi-journal-check me-2"></i>
        Konkrete Abschlussarbeiten 
        <span class="badge bg-success ms-2"><%= konkrete_abschlussarbeiten.count %> Arbeiten</span>
      </h6>
    </div>
    <div class="card-body">
      <div class="row g-2">
        <% konkrete_abschlussarbeiten.each do |arbeit| %>
          <div class="col-md-6">
            <div class="card border h-100">
              <div class="card-body p-3">
                <h6 class="card-title mb-2"><%= arbeit.angepasste_themenskizze&.truncate(50) || 'Kein Titel' %></h6>
                <div class="small text-muted mb-2">
                  <strong>Betreuer:</strong> <%= arbeit.betreuer %>
                </div>
                <div class="small text-muted mb-2">
                  <strong>Matrikel:</strong> <%= arbeit.matrikelnummer %>
                </div>
                <%= link_to konkrete_abschlussarbeit_path(arbeit), class: "btn btn-sm btn-outline-success" do %>
                  <i class="bi bi-eye me-1"></i>Anzeigen
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% if defined?(abstrakte_abschlussarbeiten) && abstrakte_abschlussarbeiten.present? %>
  <div class="card border-warning mt-3">
    <div class="card-header bg-warning-subtle">
      <h6 class="mb-0 text-warning">
        <i class="bi bi-journal me-2"></i>
        Abstrakte Abschlussarbeiten 
        <span class="badge bg-warning ms-2"><%= abstrakte_abschlussarbeiten.count %> Themen</span>
      </h6>
    </div>
    <div class="card-body">
      <div class="row g-2">
        <% abstrakte_abschlussarbeiten.each do |arbeit| %>
          <div class="col-md-6">
            <div class="card border h-100">
              <div class="card-body p-3">
                <h6 class="card-title mb-2"><%= arbeit.thema&.truncate(50) || 'Kein Thema' %></h6>
                <div class="small text-muted mb-2">
                  <strong>Forschungsprojekt:</strong> <%= arbeit.forschungsprojekt&.truncate(40) %>
                </div>
                <%= link_to abstrakte_abschlussarbeit_path(arbeit), class: "btn btn-sm btn-outline-warning" do %>
                  <i class="bi bi-eye me-1"></i>Anzeigen
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% if (defined?(students) && students.blank?) && 
      (defined?(konkrete_abschlussarbeiten) && konkrete_abschlussarbeiten.blank?) && 
      (defined?(abstrakte_abschlussarbeiten) && abstrakte_abschlussarbeiten.blank?) %>
  <div class="alert alert-info" role="alert">
    <i class="bi bi-info-circle me-2"></i>
    Keine Ergebnisse f√ºr Ihre Suche gefunden.
  </div>
<% end %>
